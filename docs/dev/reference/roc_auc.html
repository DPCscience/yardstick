<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Metrics Based on Class Probabilities — roc_auc • yardstick</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">yardstick</a>
        <small class="tidyverse">part of the <a href="https://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidymodels/yardstick">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Metrics Based on Class Probabilities</h1>
    <small class="dont-index">Source: <a href='https://github.com/tidymodels/yardstick/blob/master/R/probs.R'><code>R/probs.R</code></a></small>
    <div class="hidden name"><code>roc_auc.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>These functions compute the areas under the receiver operating
characteristic (ROC) curve (<code>roc_auc()</code>), the precision-recall
curve (<code>pr_auc()</code>), or the multinomial log loss (<code>mn_log_loss()</code>). The actual ROC
curve can be created using <code>roc_curve()</code>. The actual PR curve can be created
using <code>pr_curve()</code>.</p>
    
    </div>

    <pre class="usage"><span class='fu'>roc_auc</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>roc_auc</span>(<span class='no'>data</span>, <span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>options</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>roc_auc_vec</span>(<span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>options</span> <span class='kw'>=</span> <span class='fu'>list</span>(), <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>pr_auc</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>pr_auc</span>(<span class='no'>data</span>, <span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>pr_auc_vec</span>(<span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>mn_log_loss</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>mn_log_loss</span>(<span class='no'>data</span>, <span class='no'>truth</span>, <span class='no'>...</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>sum</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='fu'>mn_log_loss_vec</span>(<span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>sum</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='fu'>roc_curve</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>roc_curve</span>(<span class='no'>data</span>, <span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>options</span> <span class='kw'>=</span> <span class='fu'>list</span>(),
  <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)

<span class='fu'>pr_curve</span>(<span class='no'>data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for data.frame</span>
<span class='fu'>pr_curve</span>(<span class='no'>data</span>, <span class='no'>truth</span>, <span class='no'>estimate</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A <code>data.frame</code> containing the <code>truth</code> and <code>estimate</code>
columns.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>For <code>mn_log_loss()</code>, a set of unquoted column names or one or more
<code>dplyr</code> selector functions to choose which variables contain the
class probabilities. There should be as many columns as
factor levels of <code>truth</code>. It is <strong>assumed</strong> that they are in the
same order as the factor levels. Otherwise, unused.</p></td>
    </tr>
    <tr>
      <th>truth</th>
      <td><p>The column identifier for the true class results
(that is a <code>factor</code>). This should be an unquoted column name although
this argument is passed by expression and supports
<a href='http://www.rdocumentation.org/packages/rlang/topics/quasiquotation'>quasiquotation</a> (you can unquote column
names). For <code>_vec()</code> functions, a <code>factor</code> vector.</p></td>
    </tr>
    <tr>
      <th>estimate</th>
      <td><p>The column identifier for the predicted class probabilities
(that is a <code>numeric</code>) corresponding to the "positive" result. See Details.
For <code>_vec()</code> functions, a <code>numeric</code> vector. For <code>mn_log_loss_vec</code>, this should
be a matrix with as many columns as factor levels in <code>truth</code>.</p></td>
    </tr>
    <tr>
      <th>options</th>
      <td><p>A <code>list</code> of named options to pass to <code>roc()</code>
such as <code>direction</code> or <code>smooth</code>. These options should not include <code>response</code>,
<code>predictor</code>, or <code>levels</code>.</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>A <code>logical</code> value indicating whether <code>NA</code>
values should be stripped before the computation proceeds.</p></td>
    </tr>
    <tr>
      <th>sum</th>
      <td><p>A <code>logical</code>. Should the sum of the likelihood contributions be
returned (instead of the mean value)?</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>_vec()</code> functions, a single <code>numeric</code> value (or <code>NA</code>). Otherwise, a
<code>tibble</code> with columns <code>.metric</code> and <code>.estimate</code> and 1 row of
values.</p>
<p>For grouped data frames, the number of rows returned will be the
same as the number of groups.</p>
<p>For <code>roc_curve()</code>, a tibble with columns
<code>sensitivity</code> and <code>specificity</code>. If an ordinary (i.e. non-smoothed) curve
is used, there is also a column for <code>threshold</code>.</p>
<p>For <code>pr_curve()</code>, a tibble with columns <code>recall</code>, <code>precision</code>, and
<code>threshold</code>.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>There is no common convention on which factor level should
automatically be considered the "relevant" or "positive" results.
In <code>yardstick</code>, the default is to use the <em>first</em> level. To
change this, a global option called <code>yardstick.event_first</code> is
set to <code>TRUE</code> when the package is loaded. This can be changed
to <code>FALSE</code> if the last level of the factor is considered the
level of interest.</p>
<p><code>roc_curve()</code> computes the sensitivity at every unique
value of the probability column (in addition to infinity and
minus infinity). If a smooth ROC curve was produced, the unique
observed values of the specificity are used to create the curve
points. In either case, this may not be efficient for large data
sets.</p>
<p><code>pr_curve()</code> computes the precision at every unique value of the
probability column (in addition to infinity).</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='conf_mat.html'>conf_mat()</a></code>, <code><a href='summary.conf_mat.html'>summary.conf_mat()</a></code>, <code><a href='recall.html'>recall()</a></code>, <code><a href='mcc.html'>mcc()</a></code></p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>library</span>(<span class='no'>tidyselect</span>)

<span class='fu'>data</span>(<span class='st'>"two_class_example"</span>)
<span class='no'>prob_cols</span> <span class='kw'>&lt;-</span> <span class='fu'>levels</span>(<span class='no'>two_class_example</span>$<span class='no'>truth</span>)

<span class='fu'>roc_auc</span>(<span class='no'>two_class_example</span>, <span class='kw'>truth</span> <span class='kw'>=</span> <span class='no'>truth</span>, <span class='no'>Class1</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;   .metric .estimate
#&gt;   &lt;chr&gt;       &lt;dbl&gt;
#&gt; 1 roc_auc     0.939</div><div class='input'>
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)
<span class='fu'>library</span>(<span class='no'>dplyr</span>)

<span class='fu'>roc_curve</span>(<span class='no'>two_class_example</span>, <span class='no'>truth</span>, <span class='no'>Class1</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span> - <span class='no'>specificity</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>sensitivity</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_path</a></span>() +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_abline'>geom_abline</a></span>(<span class='kw'>lty</span> <span class='kw'>=</span> <span class='fl'>3</span>) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/coord_fixed'>coord_equal</a></span>() +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme'>theme_bw</a></span>()</div><div class='img'><img src='roc_auc-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='fu'>pr_curve</span>(<span class='no'>two_class_example</span>, <span class='no'>truth</span>, <span class='no'>Class1</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>recall</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>precision</span>)) +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_path</a></span>() +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/coord_fixed'>coord_equal</a></span>() +
  <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggtheme'>theme_bw</a></span>()</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 1 rows containing missing values (geom_path).</span></div><div class='img'><img src='roc_auc-2.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='co'># passing options via a list and _not_ `...`</span>
<span class='fu'>roc_auc</span>(<span class='no'>two_class_example</span>, <span class='kw'>truth</span> <span class='kw'>=</span> <span class='no'>truth</span>, <span class='no'>Class1</span>,
        <span class='kw'>options</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw'>smooth</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;   .metric .estimate
#&gt;   &lt;chr&gt;       &lt;dbl&gt;
#&gt; 1 roc_auc     0.942</div><div class='input'>

<span class='fu'>pr_auc</span>(<span class='no'>two_class_example</span>, <span class='no'>truth</span>, <span class='no'>Class1</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;   .metric .estimate
#&gt;   &lt;chr&gt;       &lt;dbl&gt;
#&gt; 1 pr_auc      0.943</div><div class='input'>
<span class='fu'>mn_log_loss</span>(<span class='no'>two_class_example</span>, <span class='no'>truth</span>, <span class='fu'><a href='http://dplyr.tidyverse.org/reference/reexports.html'>starts_with</a></span>(<span class='st'>"Class"</span>))</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;   .metric     .estimate
#&gt;   &lt;chr&gt;           &lt;dbl&gt;
#&gt; 1 mn_log_loss    -0.328</div><div class='input'><span class='co'># or</span>
<span class='fu'>mn_log_loss</span>(<span class='no'>two_class_example</span>, <span class='no'>truth</span>, !! <span class='no'>prob_cols</span>)</div><div class='output co'>#&gt; # A tibble: 1 x 2
#&gt;   .metric     .estimate
#&gt;   &lt;chr&gt;           &lt;dbl&gt;
#&gt; 1 mn_log_loss    -0.328</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>yardstick is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="https://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by Max Kuhn.</p>
  <p>Site built by <a href="https://pkgdown.r-lib.org">pkgdown</a>.</p>
</div>

<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script>
<script>
 window.dataLayer = window.dataLayer || [];
 function gtag(){dataLayer.push(arguments);}
 gtag('js', new Date());

 gtag('config', 'UA-115082821-1');
</script>
      </footer>
   </div>

  

  </body>
</html>

